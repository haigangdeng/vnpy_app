(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/login"],{"3b48":function(e,t,o){"use strict";o.r(t);var n=o("aae3"),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);t["default"]=a.a},"3eb2":function(e,t,o){"use strict";var n,a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPassword=!e.showPassword})},i=[];o.d(t,"b",function(){return a}),o.d(t,"c",function(){return i}),o.d(t,"a",function(){return n})},"54d1":function(e,t,o){"use strict";var n=o("7806"),a=o.n(n);a.a},7806:function(e,t,o){},"9c85":function(e,t,o){"use strict";o.r(t);var n=o("3eb2"),a=o("3b48");for(var i in a)"default"!==i&&function(e){o.d(t,e,function(){return a[e]})}(i);o("54d1");var s,r=o("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},"9cd5":function(e,t,o){"use strict";(function(e){o("a13b"),o("921b");n(o("66fd"));var t=n(o("9c85"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},aae3:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={props:{focus:{type:[Boolean,String],default:!1}},data:function(){return{cookieTypes:[{name:"1天",value:"1",checked:!1},{name:"1周",value:"7",checked:!0},{name:"1月",value:"30",checked:!1}],userName:"",password:"",positionTop:0,showPassword:!1,serverUrlName:"演示服务器"}},onLoad:function(){var t=this,o=t.getAppEnvironment();t.serverUrlName="production"==o?"正式服务器":"test"==o?"测试服务器":"演示服务器";var n=t.getGlobalUser("globalUser");null!=n&&e.reLaunch({url:"../main/main"})},methods:{initPosition:function(){this.positionTop=e.getSystemInfoSync().windowHeight-100},clearUserName:function(){this.userName=""},cookieTypeSelectChange:function(t){for(var o=t.detail.value,n=0;n<this.cookieTypes.length;n++)o==this.cookieTypes[n].value?(this.cookieTypes[n].checked=!0,e.setStorageSync("cookieType",this.cookieTypes[n].value),console.log(this.cookieTypes[n].value)):this.cookieTypes[n].checked=!1;this.cookieTypes=this.cookieTypes},bindServerUrlChange:function(){var t=this,o=e.getStorageSync("serverList");e.showActionSheet({itemList:["演示服务器","测试服务器","正式服务器"],success:function(n){2===n.tapIndex?(e.setStorageSync("appEnvironment","production"),t.serverUrlName="正式服务器",null!=o.production&&""!=o.production&&void 0!=typeof o.production||e.reLaunch({url:"updateserverurl?returnurl=login"})):1===n.tapIndex?(e.setStorageSync("appEnvironment","test"),t.serverUrlName="测试服务器",null!=o.test&&""!=o.test&&void 0!=typeof o.test||e.reLaunch({url:"updateserverurl?returnurl=login"})):(e.setStorageSync("appEnvironment","demo"),t.serverUrlName="演示服务器")},fail:function(e){console.log(e.errMsg)}})},bindLogin:function(){if(this.userName.length<3)e.showToast({icon:"none",title:"用户名最短为 3 个字符"});else if(this.password.length<6)e.showToast({icon:"none",title:"密码最短为 6 个字符"});else{e.showLoading({title:"登录中..."});var t=this,o=t.userName,n=t.password,a=t.getServerUrl();console.log(a),e.request({url:a+"/User/Login?userName="+o+"&password="+n,method:"POST",header:{appKey:t.appKey,appSecret:t.appSecret},success:function(o){if(-1!=o.data.toString().indexOf("Error"))e.showToast({title:t.serverUrlName+"维护错误"}),setTimeout(function(){e.reLaunch({url:"updateserverurl?returnurl=login"})},1e3);else{if(1!=o.data.Status)return void e.showToast({title:o.data.StatusMessage,duration:2500,image:"../../static/icon/error.png"});var n=o.data.Data,a=t.getCookieHours(),i=new Date,s=i.setTime(i.setHours(i.getHours()+a));n.expiredDate=s,e.setStorageSync("globalUser",n),console.log(n),e.switchTab({url:"../main/main"})}},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}},binddomainLogin:function(){if(e.showLoading({title:"域账户登录中..."}),this.userName.length<3)e.showToast({icon:"none",title:"用户名最短为 3 个字符"});else if(this.password.length<6)e.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t=this,o=this.userName,n=this.password,a=t.getServerUrl();e.request({url:a+"/User/LoginLdap?userName="+o+"&password="+n,method:"POST",header:{appKey:t.getAppKey(),appSecret:t.getAppSecret()},success:function(t){if(1==t.data.Status){var o=t.data.Data;e.setStorageSync("globalUser",o),e.switchTab({url:"../main/main"})}else e.showToast({title:t.data.StatusMessage,duration:2500,image:"../../static/icon/error.png"})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}}},onReady:function(){this.initPosition()}};t.default=o}).call(this,o("543d")["default"])}},[["9cd5","common/runtime","common/vendor"]]]);