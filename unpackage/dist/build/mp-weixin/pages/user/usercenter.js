(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/usercenter"],{"2a1a":function(e,t,a){"use strict";(function(e){a("a13b"),a("921b");n(a("66fd"));var t=n(a("eed1"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},5440:function(e,t,a){"use strict";var n=a("d9db"),o=a.n(n);o.a},"7a01":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{userIsLogin:!1,userInfo:{},currentProjectInfo:{},myFirstTotal:0,mySecondTotal:0,myThirdTotal:0,myFirstCounted:0,mySecondCounted:0,myThirdCounted:0,myFirstProgress:0,mySecondProgress:0,myThirdProgress:0,userContact:{},realName:"",code:"",gender:"",birthday:" ",mobile:"",telephone:"",email:"",qq:"",wechat:""}},onShow:function(){var t=this,a=t.getGlobalUser("globalUser");t.getServerUrl();if(null!=a){t.getUserContact(),t.userIsLogin=!0,t.userInfo=a;var n=t.getCurrentProjectInfo();null!=n&&(t.currentProjectInfo=n,t.getProgress(n.Id,1,a.UserName),1==n.IsSecondEnabled&&t.getProgress(n.Id,2,a.UserName),1==n.IsThirdEnabled&&t.getProgress(n.Id,3,a.UserName))}else t.userIsLogin=!1,t.userInfo={},e.reLaunch({url:"login"})},methods:{getProgress:function(t,a,n){var o=this,r=o.getServerUrl(),s=o.getGlobalUser("globalUser");e.request({url:r+"/PhysicalInventoryOrder/GetLineStatistics/"+t+"?sequence="+a+"&groupBy=OperatorUserName",method:"POST",header:{appKey:o.appKey,appSecret:o.appSecret,userId:JSON.stringify(s.Id),openId:JSON.stringify(s.OpenId),userInfo:encodeURI(JSON.stringify(s))},success:function(t){if(1==t.data.Status){if(null==t.data.Data);else for(var r=0;r<t.data.Data.length;r++)if(t.data.Data[r].GroupBy==n&&t.data.Data[r].TotalLines>0){var s=Math.ceil(t.data.Data[r].CountedLines/t.data.Data[r].TotalLines*100);1==a&&(o.myFirstCounted=t.data.Data[r].CountedLines,o.myFirstTotal=t.data.Data[r].TotalLines,o.myFirstProgress=s),2==a&&(o.mySecondCounted=t.data.Data[r].CountedLines,o.mySecondTotal=t.data.Data[r].TotalLines,o.mySecondProgress=s),3==a&&(o.myThirdCounted=t.data.Data[r].CountedLines,o.myThirdTotal=t.data.Data[r].TotalLines,o.myThirdProgress=s)}}else e.showToast({title:t.data.StatusMessage,duration:2e3})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})},getUserContact:function(){var t=this,a=t.getServerUrl(),n=t.getGlobalUser("globalUser");e.request({url:a+"/User/GetUserContact",method:"POST",header:{appKey:t.appKey,appSecret:t.appSecret,userId:JSON.stringify(n.Id),openId:JSON.stringify(n.OpenId),userInfo:encodeURI(JSON.stringify(n))},success:function(a){console.log(a.data),1==a.data.Status?(t.userContact=a.data.Data,t.realName=null!=n.RealName?n.RealName:"",t.code=null!=n.Code?n.Code:"",t.mobile=null!=a.data.Data.Mobile?a.data.Data.Mobile:"",t.telephone=null!=a.data.Data.Telephone?a.data.Data.Telephone:"",t.email=null!=a.data.Data.Email?a.data.Data.Email:"",t.qq=null!=a.data.Data.Qq?a.data.Data.Qq:"",t.wechat=null!=a.data.Data.WeChat?a.data.Data.WeChat:""):e.showToast({title:a.data.StatusMessage,duration:2e3})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})},bindLogin:function(){e.navigateTo({url:"login"})},bindLogout:function(){var t=this,a=t.getGlobalUser("globalUser"),n=t.getServerUrl();e.showLoading({title:"请求中..."}),console.log(a),e.request({url:n+"/User/Logout",method:"POST",header:{appKey:t.appKey,appSecret:t.appSecret,userId:JSON.stringify(a.Id),openId:JSON.stringify(a.OpenId),userInfo:encodeURI(JSON.stringify(a))},success:function(t){var a=t.data.StatusMessage;1==t.data.Status?(e.removeStorageSync("globalUser"),e.showToast({title:"退出成功",duration:2e3}),e.reLaunch({url:"login"})):(e.clearStorageSync(),e.showToast({title:a,duration:2e3}),e.reLaunch({url:"../login/login"}))},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}}};t.default=a}).call(this,a("543d")["default"])},a1aa:function(e,t,a){"use strict";a.r(t);var n=a("7a01"),o=a.n(n);for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);t["default"]=o.a},d9db:function(e,t,a){},eb41:function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},r=[];a.d(t,"b",function(){return o}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return n})},eed1:function(e,t,a){"use strict";a.r(t);var n=a("eb41"),o=a("a1aa");for(var r in o)"default"!==r&&function(e){a.d(t,e,function(){return o[e]})}(r);a("5440");var s,i=a("f0c5"),l=Object(i["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=l.exports}},[["2a1a","common/runtime","common/vendor"]]]);