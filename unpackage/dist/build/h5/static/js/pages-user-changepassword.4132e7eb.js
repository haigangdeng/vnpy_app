(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-changepassword"],{"0b78":function(e,s,a){"use strict";a.r(s);var t=a("9254"),o=a("55d2");for(var n in o)"default"!==n&&function(e){a.d(s,e,(function(){return o[e]}))}(n);var r,i=a("f0c5"),d=Object(i["a"])(o["default"],t["b"],t["c"],!1,null,"2e841106",null,!1,t["a"],r);s["default"]=d.exports},"55d2":function(e,s,a){"use strict";a.r(s);var t=a("93fb"),o=a.n(t);for(var n in t)"default"!==n&&function(e){a.d(s,e,(function(){return t[e]}))}(n);s["default"]=o.a},9254:function(e,s,a){"use strict";var t;a.d(s,"b",(function(){return o})),a.d(s,"c",(function(){return n})),a.d(s,"a",(function(){return t}));var o=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("gracePage",{attrs:{customHeader:!1}},[a("v-uni-view",{staticClass:"grace-body",attrs:{slot:"gBody"},slot:"gBody"},[a("v-uni-view",{staticClass:"grace-form grace-margin-top"},[a("v-uni-view",{staticClass:"grace-items"},[a("v-uni-text",{staticClass:"dotnet-icons icon-wms-key icon grace-blue"}),a("v-uni-view",{staticClass:"grace-label"},[e._v("旧密码")]),"checkbox"===(e.showPassword?"text":"password")?a("v-uni-input",{staticClass:"input text-align-left",attrs:{name:"oldPassword",placeholder:"请输入您的旧密码",type:"checkbox"},model:{value:e.oldPassword,callback:function(s){e.oldPassword=s},expression:"oldPassword"}}):"radio"===(e.showPassword?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],staticClass:"input text-align-left",attrs:{name:"oldPassword",placeholder:"请输入您的旧密码",type:"radio"},domProps:{checked:e._q(e.oldPassword,null)},on:{change:function(s){e.oldPassword=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],staticClass:"input text-align-left",attrs:{name:"oldPassword",placeholder:"请输入您的旧密码",type:e.showPassword?"text":"password"},domProps:{value:e.oldPassword},on:{input:function(s){s.target.composing||(e.oldPassword=s.target.value)}}}),a("v-uni-view",{staticClass:"grace-form-funs grace-icons icon-eye",style:{color:e.showPassword?"#007aff":""},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.showPassword=!e.showPassword}}})],1),a("v-uni-view",{staticClass:"grace-items"},[a("v-uni-text",{staticClass:"dotnet-icons icon-wms-key icon grace-blue"}),a("v-uni-view",{staticClass:"grace-label"},[e._v("新密码")]),"checkbox"===(e.showPassword?"text":"password")?a("v-uni-input",{staticClass:"input text-align-left",attrs:{name:"newPassword",placeholder:"请输入您的新密码",type:"checkbox"},model:{value:e.newPassword,callback:function(s){e.newPassword=s},expression:"newPassword"}}):"radio"===(e.showPassword?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"input text-align-left",attrs:{name:"newPassword",placeholder:"请输入您的新密码",type:"radio"},domProps:{checked:e._q(e.newPassword,null)},on:{change:function(s){e.newPassword=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"input text-align-left",attrs:{name:"newPassword",placeholder:"请输入您的新密码",type:e.showPassword?"text":"password"},domProps:{value:e.newPassword},on:{input:function(s){s.target.composing||(e.newPassword=s.target.value)}}}),a("v-uni-view",{staticClass:"grace-form-funs grace-icons icon-eye",style:{color:e.showPassword?"#007aff":""},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.showPassword=!e.showPassword}}})],1),a("v-uni-view",{staticClass:"grace-items"},[a("v-uni-text",{staticClass:"dotnet-icons icon-wms-key icon grace-blue"}),a("v-uni-view",{staticClass:"grace-label"},[e._v("再次输入新密码")]),"checkbox"===(e.showPassword?"text":"password")?a("v-uni-input",{staticClass:"input text-align-left",attrs:{name:"repeatPassword",placeholder:"请再次输入您的新密码",type:"checkbox"},model:{value:e.repeatPassword,callback:function(s){e.repeatPassword=s},expression:"repeatPassword"}}):"radio"===(e.showPassword?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatPassword,expression:"repeatPassword"}],staticClass:"input text-align-left",attrs:{name:"repeatPassword",placeholder:"请再次输入您的新密码",type:"radio"},domProps:{checked:e._q(e.repeatPassword,null)},on:{change:function(s){e.repeatPassword=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatPassword,expression:"repeatPassword"}],staticClass:"input text-align-left",attrs:{name:"repeatPassword",placeholder:"请再次输入您的新密码",type:e.showPassword?"text":"password"},domProps:{value:e.repeatPassword},on:{input:function(s){s.target.composing||(e.repeatPassword=s.target.value)}}}),a("v-uni-view",{staticClass:"grace-form-funs grace-icons icon-eye",style:{color:e.showPassword?"#007aff":""},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.showPassword=!e.showPassword}}})],1),a("v-uni-view",{staticClass:"grace-margin-top"},[a("v-uni-button",{staticClass:"grace-button",attrs:{type:"primary"},on:{click:function(s){arguments[0]=s=e.$handleEvent(s),e.changePassword.apply(void 0,arguments)}}},[e._v("更改密码")])],1)],1)],1)],1)},n=[]},"93fb":function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var t={data:function(){return{userIsLogin:!1,oldPassword:"",newPassword:"",repeatPassword:"",showPassword:!1}},onLoad:function(){var e=this,s=e.getCurrentUserInfo();null===s&&uni.reLaunch({url:"../user/login"})},methods:{changePassword:function(){var e=this;if(e.oldPassword.length<6)uni.showToast({icon:"none",title:"当前密码最短为 6 个字符"});else if(e.newPassword.length<6||e.repeatPassword.length<6)uni.showToast({icon:"none",title:"新密码最短为 6 个字符"});else if(e.newPassword==e.repeatPassword){var s=e.getCurrentUserInfo();uni.request({url:e.getServerUrl()+"/User/ChangePassword?oldPassword="+e.oldPassword+"&newPassword="+e.newPassword,method:"POST",header:{appKey:e.appKey,appSecret:e.appSecret,userId:s.Id,openId:s.OpenId},success:function(s){if(s.data.Status)if("UserNotLogin"==s.data.StatusCode)uni.removeStorageSync("currentUserInfo"),e.userIsLogin=!1,uni.showToast({title:"用户已异地登录",duration:2e3,icon:"none"});else{uni.showToast({title:"更改成功",duration:2e3,icon:"success"});var a=s.data.Data,t=e.getCookieHours(),o=new Date,n=o.setTime(o.setHours(o.getHours()+t));a.expiredDate=n,uni.setStorageSync("currentUserInfo",a),setTimeout((function(){uni.reLaunch({url:"usercenter"})}),2e3)}else uni.showToast({title:s.data.StatusMessage,duration:2e3,icon:"none"})}})}else uni.showToast({icon:"none",title:"新密码两次输入不一致"})},onNavigationBarButtonTap:function(e){"back"==e.type&&uni.reLaunch({url:"usercenter"})}}};s.default=t}}]);