(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"0fcd":function(e,t,a){"use strict";var s;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s}));var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("gracePage",{attrs:{customHeader:!1}},[s("v-uni-view",{staticClass:"grace-body",attrs:{slot:"gBody"},slot:"gBody"},[s("v-uni-view",{staticClass:"grace-list grace-margin-top"},[s("graceDialog",{attrs:{title:"服务协议和隐私政策",show:e.showPrivacyDialog},on:{closeDialog:function(t){arguments[0]=t=e.$handleEvent(t),e.doNotAcceptPrivacy.apply(void 0,arguments)}}},[s("v-uni-view",{staticClass:"contentPrivacyDialog",attrs:{slot:"content"},slot:"content"},[s("v-uni-text",[e._v("请务必审慎阅读、充分理解《服务协议》和《隐私政策》各项条款，包括但不限于：为了向您提供服务，我们需要收集您的设备信息，操作日志等个人信息，您可以通过链接"),s("v-uni-text",{staticClass:"grace-red",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openAgreement()}}},[e._v("《服务协议》")]),e._v("和"),s("v-uni-text",{staticClass:"grace-red",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openPrivacy()}}},[e._v("《隐私政策》")]),e._v("阅读了解详细信息。如您同意，请点击“同意”开始接受我们的服务。")],1)],1),s("v-uni-view",{staticClass:"grace-space-between",attrs:{slot:"btns"},slot:"btns"},[s("v-uni-text",{staticClass:"grace-dialog-buttons",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doNotAcceptPrivacy.apply(void 0,arguments)}}},[e._v("不同意")]),s("v-uni-text",{staticClass:"grace-dialog-buttons grace-blue",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.acceptPrivacy.apply(void 0,arguments)}}},[e._v("同意")])],1)],1)],1),s("v-uni-view",{staticClass:"grace-margin-top grace-margin-bottom"}),s("v-uni-view",{staticClass:"img grace-flex-center grace-wrap"},[s("v-uni-image",{staticStyle:{width:"100px"},attrs:{src:a("bafd"),mode:"widthFix"}})],1),s("v-uni-view",{staticClass:"grace-form grace-margin-top"},[s("v-uni-view",{staticClass:"grace-items"},[s("v-uni-text",{staticClass:"dotnet-icons icon-wms-user-c icon grace-blue"}),s("v-uni-view",{staticClass:"grace-label"},[e._v("用户")]),s("v-uni-input",{staticClass:"input text-align-left",attrs:{type:"text",name:"userName",placeholder:"请输入您的用户名"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),e.userName.length>0?s("v-uni-view",{staticClass:"grace-form-funs grace-icons icon-close",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearUserName.apply(void 0,arguments)}}}):e._e()],1),s("v-uni-view",{staticClass:"grace-items"},[s("v-uni-text",{staticClass:"dotnet-icons icon-wms-key icon grace-blue"}),s("v-uni-view",{staticClass:"grace-label"},[e._v("密码")]),"checkbox"===(e.showPassword?"text":"password")?s("v-uni-input",{staticClass:"input text-align-left",attrs:{name:"password",placeholder:"请输入您的密码",type:"checkbox"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}):"radio"===(e.showPassword?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input text-align-left",attrs:{name:"password",placeholder:"请输入您的密码",type:"radio"},domProps:{checked:e._q(e.password,null)},on:{change:function(t){e.password=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input text-align-left",attrs:{name:"password",placeholder:"请输入您的密码",type:e.showPassword?"text":"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("v-uni-view",{staticClass:"grace-form-funs grace-icons icon-eye",style:{color:e.showPassword?"#007aff":""},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPassword=!e.showPassword}}})],1),s("v-uni-view",{staticClass:"grace-items"},[s("v-uni-text",{staticClass:"grace-icons icon-address icon grace-blue"}),s("v-uni-view",{staticClass:"grace-label"},[e._v("服务器")]),s("v-uni-view",{staticClass:"grace-items-login"},[s("v-uni-input",{staticClass:"input text-align-left",attrs:{type:"text",name:"serverUrlName",placeholder:"请输入服务器IP地址",disabled:"true"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindServerUrlChange.apply(void 0,arguments)}},model:{value:e.serverUrlName,callback:function(t){e.serverUrlName=t},expression:"serverUrlName"}})],1)],1),s("v-uni-view",{staticClass:"grace-items"},[s("v-uni-text",{staticClass:"dotnet-icons icon-wms-question-b icon grace-blue"}),s("v-uni-view",{staticClass:"grace-label"},[e._v("保持在线")]),s("v-uni-view",{staticClass:"grace-select-tags"},[s("v-uni-radio-group",{attrs:{name:"cookieType"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.cookieTypeSelectChange.apply(void 0,arguments)}}},e._l(e.cookieTypes,(function(t,a){return s("v-uni-label",{key:a,class:[t.checked?"grace-checked":""]},[s("v-uni-radio",{attrs:{value:t.value,checked:t.checked}}),e._v(e._s(t.name))],1)})),1)],1)],1)],1),s("v-uni-view",{staticClass:"grace-margin-top grace-margin-bottom"},[s("v-uni-button",{staticClass:"grace-border-radius grace-bg-blue",attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindLogin.apply(void 0,arguments)}}},[e._v("登录"),s("v-uni-text",{staticClass:"grace-icons icon-arrow-right"})],1)],1),s("v-uni-view",{staticClass:"grace-margin-top grace-margin-bottom"}),s("v-uni-view",{staticClass:"grace-flex-center grace-wrap"},[s("v-uni-navigator",{staticClass:"grace-padding",attrs:{"open-type":"reLaunch",url:"/pages/help/help"}},[e._v("不知道账户密码？点此查看帮助")])],1),s("v-uni-view",{staticClass:"serverurllinkspace"}),s("v-uni-view",{staticClass:"grace-margin-top grace-margin-bottom"}),s("v-uni-view",{staticClass:"grace-flex-center grace-wrap"},[s("v-uni-navigator",{attrs:{"open-type":"reLaunch",url:"updateserverurl?returnurl=login"}},[e._v("维护服务器IP地址")])],1),s("graceHeaderAlert",{attrs:{show:e.showErrorMessage,background:"#FF0036"}},[s("v-uni-text",{staticClass:"grace-h5 grace-white"},[e._v(e._s(e.errorMessage))])],1)],1)],1)},i=[]},"386d":function(e,t,a){var s=a("e368");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=a("4f06").default;n("a6f49278",s,!0,{sourceMap:!1,shadowMode:!1})},"41ff":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={props:{focus:{type:[Boolean,String],default:!1}},data:function(){return{showPrivacyDialog:!0,cookieTypes:[{name:"1天",value:"1",checked:!1},{name:"1周",value:"7",checked:!0},{name:"1月",value:"30",checked:!1}],userName:"",password:"",positionTop:0,showPassword:!1,serverUrlName:"测试服务器",showErrorMessage:!1,errorMessage:""}},onLoad:function(){var e=this,t=e.getAppEnvironment();e.serverUrlName="production"==t?"实盘服务器":"test"==t?"测试服务器":"实盘服务器";var a=e.getCurrentUserInfo();null!=a&&uni.reLaunch({url:"../main/main"}),uni.getSystemInfo({success:function(t){if("android"==t.platform){var a=e.getUserAcceptAgreement();e.showPrivacyDialog=""==a}else e.showPrivacyDialog=!1}})},methods:{initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},openAgreement:function(){uni.reLaunch({url:"agreement"})},openPrivacy:function(){uni.reLaunch({url:"privacy"})},acceptPrivacy:function(){var e=this;uni.setStorageSync("userAcceptAgreement","Y"),e.showPrivacyDialog=!1},doNotAcceptPrivacy:function(){var e=this;e.errorMessage="请选择同意后继续！",e.showErrorMessage=!e.showErrorMessage},clearUserName:function(){this.userName=""},cookieTypeSelectChange:function(e){for(var t=e.detail.value,a=0;a<this.cookieTypes.length;a++)t==this.cookieTypes[a].value?(this.cookieTypes[a].checked=!0,uni.setStorageSync("cookieType",this.cookieTypes[a].value)):this.cookieTypes[a].checked=!1;this.cookieTypes=this.cookieTypes},bindServerUrlChange:function(){var e=this,t=uni.getStorageSync("serverList");uni.showActionSheet({itemList:["实盘服务器","测试服务器"],success:function(a){0===a.tapIndex?(uni.setStorageSync("appEnvironment","production"),e.serverUrlName="实盘服务器",null!=t.productionServer&&""!=t.productionServer&&void 0!=typeof t.productionServer||uni.reLaunch({url:"updateserverurl?returnurl=login"})):(uni.setStorageSync("appEnvironment","test"),e.serverUrlName="测试服务器",null!=t.testServer&&""!=t.testServer&&void 0!=typeof t.testServer||uni.reLaunch({url:"updateserverurl?returnurl=login"}))},fail:function(e){console.log(e.errMsg)}})},bindLogin:function(){var e=this;if(e.userName.length<3)uni.showToast({icon:"none",title:"用户名最短为 3 个字符"});else if(e.password.length<3)uni.showToast({icon:"none",title:"密码最短为 3 个字符"});else{var t=e.userName,a=e.password,s=e.getServerUrl();if(""==s)return e.errorMessage="请检查服务器IP是否正确",void(e.showErrorMessage=!e.showErrorMessage);uni.showLoading({title:"登录中..."}),uni.request({url:s+"/token",method:"POST",header:{"content-type":"application/x-www-form-urlencoded",accept:"application/json"},data:{username:t,password:a},success:function(a){if(200==a.statusCode){var s=a.data,n=e.getCookieHours(),i=new Date,r=i.setTime(i.setHours(i.getHours()+n));s.expiredDate=r,s.UserName=t,uni.setStorageSync("currentUserInfo",s),uni.switchTab({url:"../main/asset"}),console.log(s),console.log(uni.getStorageInfoSync("currentUserInfo"))}else e.errorMessage=a.data.detail,e.showErrorMessage=!e.showErrorMessage},fail:function(t){e.errorMessage="请检查服务器IP是否正确",e.showErrorMessage=!e.showErrorMessage},complete:function(){setTimeout((function(){uni.hideLoading()}),2e3)}})}},register:function(){uni.reLaunch({url:"register"})}},onReady:function(){this.initPosition()},components:{},onShareAppMessage:function(e){return{title:"VeighNa - 基于Python的开源量化交易平台开发框架",path:"/pages/help/help"}}};t.default=s},"902e":function(e,t,a){"use strict";a.r(t);var s=a("41ff"),n=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,(function(){return s[e]}))}(i);t["default"]=n.a},9550:function(e,t,a){"use strict";var s=a("386d"),n=a.n(s);n.a},bafd:function(e,t,a){e.exports=a.p+"static/img/logo.dacb0fb9.png"},bc66:function(e,t,a){"use strict";a.r(t);var s=a("0fcd"),n=a("902e");for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("9550");var r,o=a("f0c5"),c=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,"b94b2e6a",null,!1,s["a"],r);t["default"]=c.exports},e368:function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".contentPrivacyDialog[data-v-b94b2e6a]{padding:%?30?%;padding-right:%?80?%;line-height:%?50?%;font-size:%?26?%}.demo[data-v-b94b2e6a]{margin-top:%?30?%;display:flex;flex-wrap:nowrap}.demo uni-view[data-v-b94b2e6a]{width:100%;text-align:center;padding:%?10?% 2%}.demo .btnLogin[data-v-b94b2e6a]{width:45%;min-width:%?230?%}.grace-button[data-v-b94b2e6a]{display:block;white-space:nowrap;width:%?125?%;height:%?80?%;text-align:center}.grace-button-new[data-v-b94b2e6a]{display:block;white-space:nowrap;width:%?200?%;height:%?80?%;text-align:center;font-size:%?14?%}.grace-items-login[data-v-b94b2e6a]{display:flex;width:100%;align-items:center;flex-wrap:nowrap;justify-content:space-between;padding:%?10?% 0}.serverurllinkspace[data-v-b94b2e6a]{margin:%?120?%}",""]),e.exports=t}}]);