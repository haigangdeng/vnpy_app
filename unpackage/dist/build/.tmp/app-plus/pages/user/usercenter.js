(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/usercenter"],{"09ce":function(e,a,t){"use strict";(function(e,t){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n={data:function(){return{userIsLogin:!1,userInfo:{},currentProjectInfo:{},myFirstTotal:0,mySecondTotal:0,myThirdTotal:0,myFirstCounted:0,mySecondCounted:0,myThirdCounted:0,myFirstProgress:0,mySecondProgress:0,myThirdProgress:0,userContact:{},realName:"",code:"",gender:"",birthday:" ",mobile:"",telephone:"",email:"",qq:"",wechat:""}},onShow:function(){var a=this,t=a.getGlobalUser("globalUser");a.getServerUrl();if(null!=t){a.getUserContact(),a.userIsLogin=!0,a.userInfo=t;var n=a.getCurrentProjectInfo();null!=n&&(a.currentProjectInfo=n,a.getProgress(n.Id,1,t.UserName),1==n.IsSecondEnabled&&a.getProgress(n.Id,2,t.UserName),1==n.IsThirdEnabled&&a.getProgress(n.Id,3,t.UserName))}else a.userIsLogin=!1,a.userInfo={},e.reLaunch({url:"login"})},methods:{getProgress:function(a,t,n){var o=this,r=o.getServerUrl(),s=o.getGlobalUser("globalUser");e.request({url:r+"/PhysicalInventoryOrder/GetLineStatistics/"+a+"?sequence="+t+"&groupBy=OperatorUserName",method:"POST",header:{appKey:o.appKey,appSecret:o.appSecret,userId:s.Id,openId:s.OpenId,userInfo:encodeURI(JSON.stringify(s))},success:function(a){if(1==a.data.Status){if(null==a.data.Data);else for(var r=0;r<a.data.Data.length;r++)if(a.data.Data[r].GroupBy==n&&a.data.Data[r].TotalLines>0){var s=Math.ceil(a.data.Data[r].CountedLines/a.data.Data[r].TotalLines*100);1==t&&(o.myFirstCounted=a.data.Data[r].CountedLines,o.myFirstTotal=a.data.Data[r].TotalLines,o.myFirstProgress=s),2==t&&(o.mySecondCounted=a.data.Data[r].CountedLines,o.mySecondTotal=a.data.Data[r].TotalLines,o.mySecondProgress=s),3==t&&(o.myThirdCounted=a.data.Data[r].CountedLines,o.myThirdTotal=a.data.Data[r].TotalLines,o.myThirdProgress=s)}}else e.showToast({title:a.data.StatusMessage,duration:2e3})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})},getUserContact:function(){var a=this,n=a.getServerUrl(),o=a.getGlobalUser("globalUser");e.request({url:n+"/User/GetUserContact",method:"POST",header:{appKey:a.appKey,appSecret:a.appSecret,userId:o.Id,openId:o.OpenId,userInfo:encodeURI(JSON.stringify(o))},success:function(n){console.log(t(n.data," at pages\\user\\usercenter.vue:325")),1==n.data.Status?(a.userContact=n.data.Data,a.realName=null!=o.RealName?o.RealName:"",a.code=null!=o.Code?o.Code:"",a.mobile=null!=n.data.Data.Mobile?n.data.Data.Mobile:"",a.telephone=null!=n.data.Data.Telephone?n.data.Data.Telephone:"",a.email=null!=n.data.Data.Email?n.data.Data.Email:"",a.qq=null!=n.data.Data.Qq?n.data.Data.Qq:"",a.wechat=null!=n.data.Data.WeChat?n.data.Data.WeChat:""):e.showToast({title:n.data.StatusMessage,duration:2e3})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})},bindLogin:function(){e.navigateTo({url:"login"})},bindLogout:function(){var a=this,n=a.getGlobalUser("globalUser"),o=a.getServerUrl();e.showLoading({title:"请求中..."}),console.log(t(n," at pages\\user\\usercenter.vue:370")),e.request({url:o+"/User/Logout",method:"POST",header:{appKey:a.appKey,appSecret:a.appSecret,userId:n.Id,openId:n.OpenId,userInfo:encodeURI(JSON.stringify(n))},success:function(a){var t=a.data.StatusMessage;1==a.data.Status?(e.removeStorageSync("globalUser"),e.showToast({title:"退出成功",duration:2e3}),e.reLaunch({url:"login"})):(e.clearStorageSync(),e.showToast({title:t,duration:2e3}),e.reLaunch({url:"../login/login"}))},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}}};a.default=n}).call(this,t("6e42")["default"],t("0de9")["default"])},"1bf9":function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement;e._self._c},o=[];t.d(a,"a",function(){return n}),t.d(a,"b",function(){return o})},"2a1a":function(e,a,t){"use strict";(function(e){t("a13b"),t("921b");n(t("66fd"));var a=n(t("eed1"));function n(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])},5440:function(e,a,t){"use strict";var n=t("ea7c"),o=t.n(n);o.a},a1aa:function(e,a,t){"use strict";t.r(a);var n=t("09ce"),o=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(a,e,function(){return n[e]})}(r);a["default"]=o.a},ea7c:function(e,a,t){},eed1:function(e,a,t){"use strict";t.r(a);var n=t("1bf9"),o=t("a1aa");for(var r in o)"default"!==r&&function(e){t.d(a,e,function(){return o[e]})}(r);t("5440");var s=t("2877"),u=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);a["default"]=u.exports}},[["2a1a","common/runtime","common/vendor"]]]);