(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/login"],{"3b48":function(e,t,o){"use strict";o.r(t);var n=o("c81c"),s=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},"3ee6":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.showPassword=!e.showPassword})},s=[];o.d(t,"a",function(){return n}),o.d(t,"b",function(){return s})},"54d1":function(e,t,o){"use strict";var n=o("ce70"),s=o.n(n);s.a},"9c85":function(e,t,o){"use strict";o.r(t);var n=o("3ee6"),s=o("3b48");for(var a in s)"default"!==a&&function(e){o.d(t,e,function(){return s[e]})}(a);o("54d1");var i=o("2877"),r=Object(i["a"])(s["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},"9cd5":function(e,t,o){"use strict";(function(e){o("a13b"),o("921b");n(o("66fd"));var t=n(o("9c85"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},c81c:function(e,t,o){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{focus:{type:[Boolean,String],default:!1}},data:function(){return{cookieTypes:[{name:"1天",value:"1",checked:!1},{name:"1周",value:"7",checked:!0},{name:"1月",value:"30",checked:!1}],userName:"",password:"",positionTop:0,showPassword:!1,serverUrlName:"演示服务器"}},onLoad:function(){var t=this,o=t.getAppEnvironment();t.serverUrlName="production"==o?"正式服务器":"test"==o?"测试服务器":"演示服务器";var n=t.getGlobalUser("globalUser");null!=n&&e.reLaunch({url:"../main/main"})},methods:{initPosition:function(){this.positionTop=e.getSystemInfoSync().windowHeight-100},clearUserName:function(){this.userName=""},cookieTypeSelectChange:function(t){for(var n=t.detail.value,s=0;s<this.cookieTypes.length;s++)n==this.cookieTypes[s].value?(this.cookieTypes[s].checked=!0,e.setStorageSync("cookieType",this.cookieTypes[s].value),console.log(o(this.cookieTypes[s].value," at pages\\user\\login.vue:148"))):this.cookieTypes[s].checked=!1;this.cookieTypes=this.cookieTypes},bindServerUrlChange:function(){var t=this,n=e.getStorageSync("serverList");e.showActionSheet({itemList:["演示服务器","测试服务器","正式服务器"],success:function(o){2===o.tapIndex?(e.setStorageSync("appEnvironment","production"),t.serverUrlName="正式服务器",null!=n.production&&""!=n.production&&void 0!=typeof n.production||e.reLaunch({url:"updateserverurl?returnurl=login"})):1===o.tapIndex?(e.setStorageSync("appEnvironment","test"),t.serverUrlName="测试服务器",null!=n.test&&""!=n.test&&void 0!=typeof n.test||e.reLaunch({url:"updateserverurl?returnurl=login"})):(e.setStorageSync("appEnvironment","demo"),t.serverUrlName="演示服务器")},fail:function(e){console.log(o(e.errMsg," at pages\\user\\login.vue:194"))}})},bindLogin:function(){if(this.userName.length<3)e.showToast({icon:"none",title:"用户名最短为 3 个字符"});else if(this.password.length<6)e.showToast({icon:"none",title:"密码最短为 6 个字符"});else{e.showLoading({title:"登录中..."});var t=this,n=t.userName,s=t.password,a=t.getServerUrl();console.log(o(a," at pages\\user\\login.vue:221")),e.request({url:a+"/User/Login?userName="+n+"&password="+s,method:"POST",header:{appKey:t.appKey,appSecret:t.appSecret},success:function(n){if(-1!=n.data.toString().indexOf("Error"))e.showToast({title:t.serverUrlName+"维护错误"}),setTimeout(function(){e.reLaunch({url:"updateserverurl?returnurl=login"})},1e3);else{if(1!=n.data.Status)return void e.showToast({title:n.data.StatusMessage,duration:2500,image:"../../static/icon/error.png"});var s=n.data.Data,a=t.getCookieHours(),i=new Date,r=i.setTime(i.setHours(i.getHours()+a));s.expiredDate=r,e.setStorageSync("globalUser",s),console.log(o(s," at pages\\user\\login.vue:250")),e.switchTab({url:"../main/main"})}},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}},binddomainLogin:function(){if(e.showLoading({title:"域账户登录中..."}),this.userName.length<3)e.showToast({icon:"none",title:"用户名最短为 3 个字符"});else if(this.password.length<6)e.showToast({icon:"none",title:"密码最短为 6 个字符"});else{var t=this,o=this.userName,n=this.password,s=t.getServerUrl();e.request({url:s+"/User/LoginLdap?userName="+o+"&password="+n,method:"POST",header:{appKey:t.getAppKey(),appSecret:t.getAppSecret()},success:function(t){if(1==t.data.Status){var o=t.data.Data;e.setStorageSync("globalUser",o),e.switchTab({url:"../main/main"})}else e.showToast({title:t.data.StatusMessage,duration:2500,image:"../../static/icon/error.png"})},fail:function(){e.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){e.hideLoading()}})}}},onReady:function(){this.initPosition()}};t.default=n}).call(this,o("6e42")["default"],o("0de9")["default"])},ce70:function(e,t,o){}},[["9cd5","common/runtime","common/vendor"]]]);