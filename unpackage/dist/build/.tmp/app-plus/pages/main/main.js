(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/main"],{"295d":function(t,e,r){"use strict";r.r(e);var o=r("bf46"),s=r("7640");for(var i in s)"default"!==i&&function(t){r.d(e,t,function(){return s[t]})}(i);r("4c2f");var n=r("2877"),c=Object(n["a"])(s["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},"44c0":function(t,e,r){},"4c2f":function(t,e,r){"use strict";var o=r("44c0"),s=r.n(o);s.a},"70d7":function(t,e,r){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return r.e("graceUI/components/graceCirProgress").then(r.bind(null,"21e4"))},i={data:function(){return{userIsLogin:!1,userInfo:{},projectList:[{}],projectIndex:0,currentProjectInfo:{},projectStatistic:{},projectProgress:0,firstProgress:0,secondProgress:0,thirdProgess:0}},components:{graceCirProgress:s},onLoad:function(){this.onShow},onShow:function(){var e=this,r=e.getGlobalUser("globalUser");if(null!=r){e.userIsLogin=!0,e.userInfo=r;var o=e.getServerUrl();t.request({url:o+"/PhysicalInventoryOrder/GetList",method:"GET",header:{appKey:e.appKey,appSecret:e.appSecret,userId:r.Id,openId:r.OpenId,userInfo:encodeURI(JSON.stringify(r))},success:function(s){if(1==s.data.Status)if(s.data.Data.length>0){e.projectList=s.data.Data;var i=e.getCurrentProjectInfo();if(null!=i)for(var n=0;n<e.projectList.length;n++)i.Id===e.projectList[n].Id&&(e.projectIndex=n,e.currentProjectInfo=e.projectList[n],t.setStorageSync("currentProjectInfo",e.projectList[n]));else e.currentProjectInfo=e.projectList[0],t.setStorageSync("currentProjectInfo",e.projectList[0]);t.request({url:o+"/PhysicalInventoryOrder/GetStatistics/"+e.currentProjectInfo.Id,method:"POST",header:{appKey:e.appKey,appSecret:e.appSecret,userId:r.Id,openId:r.OpenId,userInfo:encodeURI(JSON.stringify(r))},success:function(r){1==r.data.Status?null==r.data.Data?(t.showToast({title:"此盘点无统计数据",duration:1500}),e.projectStatistic={}):(e.projectStatistic=r.data.Data,e.projectStatistic.TotalLines>0?e.projectProgress=Math.ceil(e.projectStatistic.CountedLines/e.projectStatistic.TotalLines*100):e.projectProgress=0,e.projectStatistic.FirstTotalLines>0?e.firstProgress=Math.ceil(e.projectStatistic.FirstCountedLines/e.projectStatistic.FirstTotalLines*100):e.firstProgress=0,1==e.projectStatistic.IsSecondEnabled&&(e.projectStatistic.SecondTotalLines>0?e.secondProgress=Math.ceil(e.projectStatistic.SecondCountedLines/e.projectStatistic.SecondTotalLines*100):e.secondProgress=0),1==e.projectStatistic.IsThirdEnabled&&(e.projectStatistic.FirstTotalLines>0?e.thirdProgess=Math.ceil(e.projectStatistic.ThirdCountedLines/e.projectStatistic.FirstTotalLines*100):e.thirdProgess=0)):t.showToast({title:r.data.StatusMessage,duration:2e3})},fail:function(){t.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){t.hideLoading()}})}else t.removeStorageSync("currentProjectInfo"),t.switchTab({url:"../user/usercenter"});else t.showToast({title:s.data.StatusMessage,duration:2e3})}})}else e.userIsLogin=!1,e.userInfo={},t.showModal({title:"未登录",content:"您未登录，需要登录后才能继续",success:function(e){e.confirm,t.reLaunch({url:"../user/login"})}})},methods:{bindPickerChangeProject:function(e){var r=this;r.projectIndex=e.target.value,r.currentProjectInfo=r.projectList[r.projectIndex],t.setStorageSync("currentProjectInfo",r.projectList[r.projectIndex]),r.getStatistics(r.currentProjectInfo.Id)},getStatistics:function(e){var r=this,s=r.getServerUrl(),i=r.getGlobalUser("globalUser");t.request({url:s+"/PhysicalInventoryOrder/GetStatistics/"+e,method:"POST",header:{appKey:r.appKey,appSecret:r.appSecret,userId:i.Id,openId:i.OpenId,userInfo:encodeURI(JSON.stringify(i))},success:function(e){1==e.data.Status?null==e.data.Data?(t.showToast({title:"此盘点无统计数据",duration:1500}),r.projectStatistic={}):(r.projectStatistic=e.data.Data,r.projectStatistic.TotalLines>0?r.projectProgress=Math.ceil(r.projectStatistic.CountedLines/r.projectStatistic.TotalLines*100):r.projectProgress=0,r.projectStatistic.FirstTotalLines>0?r.firstProgress=Math.ceil(r.projectStatistic.FirstCountedLines/r.projectStatistic.FirstTotalLines*100):r.firstProgress=0,1==r.projectStatistic.IsSecondEnabled&&(r.projectStatistic.SecondTotalLines>0?r.secondProgress=Math.ceil(r.projectStatistic.SecondCountedLines/r.projectStatistic.SecondTotalLines*100):r.secondProgress=0),1==r.projectStatistic.IsThirdEnabled&&(r.projectStatistic.FirstTotalLines>0?r.thirdProgess=Math.ceil(r.projectStatistic.ThirdCountedLines/r.projectStatistic.FirstTotalLines*100):r.thirdProgess=0),console.log(o(r.projectStatistic," at pages\\main\\main.vue:337"))):t.showToast({title:e.data.StatusMessage,duration:2e3})},fail:function(){t.showToast({title:"网络异常请重试",duration:2e3,icon:"none"})},complete:function(){t.hideLoading()}})},goToProgessReport:function(){t.reLaunch({url:"../reports/progress"})}}};e.default=i}).call(this,r("6e42")["default"],r("0de9")["default"])},7640:function(t,e,r){"use strict";r.r(e);var o=r("70d7"),s=r.n(o);for(var i in o)"default"!==i&&function(t){r.d(e,t,function(){return o[t]})}(i);e["default"]=s.a},b6e2:function(t,e,r){"use strict";(function(t){r("a13b"),r("921b");o(r("66fd"));var e=o(r("295d"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("6e42")["createPage"])},bf46:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},s=[];r.d(e,"a",function(){return o}),r.d(e,"b",function(){return s})}},[["b6e2","common/runtime","common/vendor"]]]);