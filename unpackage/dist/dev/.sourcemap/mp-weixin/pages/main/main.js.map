{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?6cff","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?4a85","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?967b","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?5260","uni-app:///pages/main/main.vue","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?8eff","webpack:///C:/Data/Code/DotNet.PanDianApp/Project.PhysicalInventory/PandianAppClient.Warehouse/pages/main/main.vue?468a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,yF;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACqL;AACrL,gBAAgB,sLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA2rB,CAAgB,2pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2F/sB,kG;AACA;AACA,MADA,kBACA;AACA;AACA,wBADA;AAEA,kBAFA;AAGA,uBAHA;AAIA,qBAJA;AAKA,qGALA;AAMA,0BANA;AAOA,wBAPA;AAQA,sBARA;AASA,uBATA;AAUA,qBAVA;AAWA;AACA;AACA;AACA;AACA;AAfA;AAiBA,GAnBA;AAoBA;AACA,sCADA;AAEA,wBAFA,EApBA;;AAwBA,QAxBA,oBAwBA;AACA;AACA,GA1BA;AA2BA,QA3BA,oBA2BA;;AAEA,GA7BA;AA8BA;AACA;AACA;AACA;AACA,GAlCA;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA;;AAWA,cAXA,wBAWA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DADA;AAEA,uBAFA;AAGA;AACA,6BADA;AAEA,mCAFA;AAGA,+BAHA;AAIA,mCAJA,EAHA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,gCAFA;AAGA,8BAHA;;AAKA,eARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBATA,MASA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wGADA;AAEA,kCAFA;AAGA;AACA,uCADA;AAEA,6CAFA;AAGA,yCAHA;AAIA,6CAJA,EAHA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA,4CADA;AAEA,0CAFA;AAGA,wCAHA;;AAKA,yBARA,MAQA;AACA;AACA;AACA,8CADA;AAEA,4CAFA;AAGA,0CAHA;;AAKA;AACA,2BAPA,MAOA;AACA;AACA;AACA;AACA,6BAFA,MAEA;AACA;AACA;AACA;AACA;AACA,6BAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,mHADA;;AAGA,+BAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAhDA,MAgDA;AACA;AACA;AACA,uDADA;AAEA,wCAFA;AAGA,sCAHA;;AAKA;AACA;AACA,qBAnEA;AAoEA;AACA;AACA,wCADA;AAEA,sCAFA;AAGA,oCAHA;;AAKA,qBA1EA;AA2EA;AACA;AACA;AACA,uBAFA,EAEA,IAFA;AAGA,qBA/EA;;AAiFA,iBAxGA,MAwGA;AACA;AACA;AACA;AACA,mCADA;AAEA,kCAFA;AAGA,gCAHA;;AAKA;AACA;AACA;AACA;AACA;AACA,iDADA;;AAGA,mBAPA,EAOA,IAPA;AAQA;AACA;AACA,aApIA,MAoIA;AACA;AACA,6CADA;AAEA,8BAFA;AAGA,4BAHA;;AAKA;AACA,WArJA;;AAuJA,OA5JA,MA4JA;AACA;AACA;AACA;AACA;AACA,8BADA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxMA;;AA0MA;AACA;AACA;AACA;;AAEA;AACA,6EADA;AAEA,sBAFA;AAGA;AACA,2BADA;AAEA,iCAFA;AAGA,6BAHA;AAIA,iCAJA,EAHA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,8BAFA;AAGA,4BAHA;;AAKA,aARA,MAQA;AACA;AACA;AACA,mCADA;AAEA,gCAFA;AAGA,8BAHA;;AAKA;AACA,eAPA,MAOA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA;AACA,iBAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WA9CA,MA8CA;AACA;AACA;AACA,2CADA;AAEA,4BAFA;AAGA,0BAHA;;AAKA;AACA;AACA,SAjEA;AAkEA;AACA;AACA,4BADA;AAEA,0BAFA;AAGA,wBAHA;;AAKA,SAxEA;AAyEA;AACA;AACA;AACA,WAFA,EAEA,IAFA;AAGA,SA7EA;;AA+EA,KA9RA;AA+RA,qBA/RA,+BA+RA;AACA;AACA,kCADA;;AAGA,KAnSA,EAnCA;;AAwUA,mBAxUA,6BAwUA,GAxUA,EAwUA;AACA;AACA,oBADA;AAEA,+BAFA;;AAIA,GA7UA,E;;;;;;;;;;;;;AC5FA;AAAA;AAAA;AAAA;AAAk/B,CAAgB,k6BAAG,EAAC,C;;;;;;;;;;;ACAtgC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/main/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/main/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=52f690a6&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=52f690a6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<gracePage :customHeader=\"false\" :isLoading=\"pageLoading\">\r\n\t\t<view slot=\"gBody\" class=\"grace-body\">\r\n\t\t\t<view v-if=\"userIsLogin\">\r\n\t\t\t\t<view class=\"grace-margin-top\">当前登录用户：{{ userInfo.UserName }}</view>\r\n\t\t\t\t<view class=\"grace-margin-top\">当前项目：{{ userInfo.UserName }}</view>\r\n\t\t\t\t<!-- <view class=\"ucenter-line\"></view> -->\r\n\r\n<!-- \t\t\t\t<view class=\"grace-nowrap\">\r\n\t\t\t\t\t<view class=\"icons grace-icons icon-set grace-yellow grace-title\"></view>\r\n\t\t\t\t\t<view class=\"grace-title current-project\">当前项目：</view>\r\n\r\n\t\t\t\t\t<picker mode=\"selector\" @change=\"bindPickerChangeProject\" v-model=\"projectIndex\" :range=\"projectList\" range-key=\"Name\" name=\"Name\">\r\n\t\t\t\t\t\t<view class=\"grace-space-between grace-title\">\r\n\t\t\t\t\t\t\t<view class=\"uni-input\">{{ projectList[projectIndex].Name }}</view>\r\n\t\t\t\t\t\t\t<view class=\"grace-icons icon-arrow-down\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view> -->\r\n\r\n\t\t\t\t<view class=\"grace-card-view\">\r\n\t\t\t\t\t<view class=\"body\">\r\n\t\t\t\t\t\t<view v-if=\"currentProjectInfo.OrderStatusCode == 100\" class=\"img\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/icon/icon-wms-done.png\" />\r\n\t\t\t\t\t\t\t<view>已结束</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else-if=\"currentProjectInfo.OrderStatusCode == 20\" class=\"img\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/icon/icon-wms-inprocess.png\" />\r\n\t\t\t\t\t\t\t<view>进行中</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-else class=\"img\">\r\n\t\t\t\t\t\t\t<image src=\"../../static/icon/icon-wms-todo.png\" />\r\n\t\t\t\t\t\t\t<view>未开始</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"desc\">\r\n\t\t\t\t\t\t\t<view class=\"grace-text\">盘点类型：{{ currentProjectInfo.OrderTypeName }}</view>\r\n\t\t\t\t\t\t\t<view class=\"grace-text\">开始时间：{{ currentProjectInfo.PlannedStartTime }}</view>\r\n\t\t\t\t\t\t\t<view class=\"grace-text\">结束时间：{{ currentProjectInfo.PlannedEndTime }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- <view class=\"ucenter-line\"></view> -->\r\n\t\t\t\t<view class=\"grace-margin-top grace-title\">当前盘点总进度：</view>\r\n\t\t\t\t<view style=\"width:150px\">\r\n\t\t\t\t\t<graceCirProgress :width=\"150\" canvasId=\"graceCirProgress1\" :value=\"projectProgress\" :lineWidth=\"20\" progressColor=\"#10AEFF\" fontColor=\"#10AEFF\">\r\n\t\t\t\t\t\t<canvas style=\"width:150px; height:250px;\" canvas-id=\"graceCirProgress1\"></canvas>\r\n\t\t\t\t\t</graceCirProgress>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ucenter-line\"></view>\r\n\r\n\t\t\t\t<view class=\"grace-margin-top\">\r\n\t\t\t\t\t初盘进度：\r\n\t\t\t\t\t<progress :percent=\"firstProgress\" show-info />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"projectStatistic.IsSecondEnabled == 1\" class=\"grace-margin-top\">\r\n\t\t\t\t\t复盘进度：\r\n\t\t\t\t\t<progress :percent=\"secondProgress\" show-info />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"projectStatistic.IsThirdEnabled == 1\" class=\"grace-margin-top\">\r\n\t\t\t\t\t三盘进度：\r\n\t\t\t\t\t<progress :percent=\"thirdProgess\" show-info />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"ucenter-line\"></view>\r\n\r\n\t\t\t\t<!-- \t\t\t<view class=\"grace-margin-top\">\r\n\t\t\t\t<button type=\"primary\" class=\"grace-button\" @click=\"goToProgessReport\">查看详细进度</button>\r\n\t\t\t</view> -->\r\n\r\n\t\t\t\t<view class=\"grace-margin grace-margin-bottom\">\r\n\t\t\t\t\t<navigator open-type=\"reLaunch\" url=\"../user/contactus\" class=\"contact grace-border grace-border-radius\">有任何技术问题，请联系：盘点App支持团队</navigator>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"grace-margin-top grace-margin-bottom\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"!userIsLogin\" class=\"hello\">\r\n\t\t\t\t<view class=\"grace-margin-top grace-margin-bottom\"></view>\r\n\t\t\t\t<view class=\"img grace-flex-center grace-wrap\"><image src=\"../../static/img/logo.png\" mode=\"widthFix\" style=\"width: 100px;\"></image></view>\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t<view>您好，游客。</view>\r\n\t\t\t\t\t<view>使用本系统请先登录。</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</gracePage>\r\n</template>\r\n\r\n<script>\r\nimport graceCirProgress from '../../graceUI/components/graceCirProgress.vue';\r\nimport graceFlex from '../../graceUI/components/graceFlex.vue';\r\nimport uniRequest from '../../http/uniRequest.js';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuserIsLogin: false,\r\n\t\t\tuserInfo: {},\r\n\t\t\tprojectList: [{}],\r\n\t\t\tprojectIndex: 0,\r\n\t\t\tcurrentProjectInfo: { OrderTypeName: '盘点类型', PlannedStartTime: '开始时间', PlannedEndTime: '结束时间' },\r\n\t\t\tprojectStatistic: {},\r\n\t\t\tprojectProgress: 0,\r\n\t\t\tfirstProgress: 0,\r\n\t\t\tsecondProgress: 0,\r\n\t\t\tthirdProgess: 0,\r\n\t\t\tpageLoading: false\r\n\t\t\t//{Name: \"操作员进度\", value: 'OperatorUserName'} OperatorUserName,LeaderUserName,Company,Site,Project,WarehouseCode\r\n\t\t\t// chartList: [{Name: \"操作员进度\", value: 'OperatorUserName'}, {Name: \"仓库进度\", value: 'WarehouseCode'}],\r\n\t\t\t// chartIndex: 0,\r\n\t\t\t// chartRenderList: []\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tgraceCirProgress,\r\n\t\tgraceFlex\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.pageOnLoad();\r\n\t},\r\n\tonShow() {\r\n\t\t\r\n\t},\r\n\tonPullDownRefresh: function() {\r\n\t\tthis.pageOnLoad();\r\n\t\tconsole.log('刷新了');\r\n\t\tuni.stopPullDownRefresh();\r\n\t},\r\n\tmethods: {\r\n\t\tbindPickerChangeProject: function(e) {\r\n\t\t\tvar me = this;\r\n\t\t\tme.projectIndex = e.target.value;\r\n\t\t\t//storage当前项目更新\r\n\t\t\tme.currentProjectInfo = me.projectList[me.projectIndex];\r\n\t\t\tuni.setStorageSync('currentProjectInfo', me.projectList[me.projectIndex]);\r\n\t\t\tme.getStatistics(me.currentProjectInfo.Id);\r\n\t\t\t//console.log(me.projectStatistic);\r\n\t\t},\r\n\r\n\t\tpageOnLoad() {\r\n\t\t\tvar me = this;\r\n\t\t\tme.pageLoading = true;\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tme.pageLoading = false;\r\n\t\t\t}, 1500);\r\n\r\n\t\t\tvar userInfo = me.getCurrentUserInfo();\r\n\t\t\tif (userInfo != null) {\r\n\t\t\t\tme.userIsLogin = true;\r\n\t\t\t\tme.userInfo = userInfo;\r\n\t\t\t\tvar serverUrl = me.getServerUrl();\r\n\t\t\t\t//读取ProjectList\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: serverUrl + '/PhysicalInventoryOrder/GetList',\r\n\t\t\t\t\tmethod: 'GET',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\tappKey: me.appKey,\r\n\t\t\t\t\t\tappSecret: me.appSecret,\r\n\t\t\t\t\t\tuserId: userInfo.Id,\r\n\t\t\t\t\t\topenId: userInfo.OpenId\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.data.Status) {\r\n\t\t\t\t\t\t\tif (res.data.StatusCode == 'UserNotLogin') {\r\n\t\t\t\t\t\t\t\tuni.removeStorageSync('currentUserInfo');\r\n\t\t\t\t\t\t\t\tme.userIsLogin = false;\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '用户已异地登录',\r\n\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (res.data.Data.length > 0) {\r\n\t\t\t\t\t\t\t\t\t//如果projectList不为空，则绑定\r\n\t\t\t\t\t\t\t\t\tme.projectList = res.data.Data;\r\n\t\t\t\t\t\t\t\t\t//console.log(res.data.Data);\r\n\t\t\t\t\t\t\t\t\t//如果Storage里面的project不为空，则下拉菜单显示storage里的project,但是要更新内容\r\n\t\t\t\t\t\t\t\t\tvar currentProjectInfo = me.getCurrentProjectInfo();\r\n\t\t\t\t\t\t\t\t\tif (currentProjectInfo != null) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < me.projectList.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (currentProjectInfo.Id === me.projectList[i].Id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tme.projectIndex = i;\r\n\t\t\t\t\t\t\t\t\t\t\t\t//刷新me.currentProjectInfo信息并保存到内存\r\n\t\t\t\t\t\t\t\t\t\t\t\tme.currentProjectInfo = me.projectList[i];\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('currentProjectInfo', me.projectList[i]);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t//如果storage里面的project为空，则找到最新的project显示，并把此project保存到storage\r\n\t\t\t\t\t\t\t\t\t\tme.currentProjectInfo = me.projectList[0];\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('currentProjectInfo', me.projectList[0]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t//获取Statistics数据，显示进度环，显示进度\r\n\t\t\t\t\t\t\t\t\t// me.getStatistics(me.currentProjectInfo.Id);\r\n\r\n\t\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t\turl: serverUrl + '/PhysicalInventoryOrder/GetStatistics/' + me.currentProjectInfo.Id,\r\n\t\t\t\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\t\t\tappKey: me.appKey,\r\n\t\t\t\t\t\t\t\t\t\t\tappSecret: me.appSecret,\r\n\t\t\t\t\t\t\t\t\t\t\tuserId: userInfo.Id,\r\n\t\t\t\t\t\t\t\t\t\t\topenId: userInfo.OpenId\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (res.data.Status) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.StatusCode == 'UserNotLogin') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('currentUserInfo');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tme.userIsLogin = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '用户已异地登录',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.Data == null) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '无盘点统计数据',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.projectStatistic = {};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.projectStatistic = res.data.Data;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.TotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.projectProgress = Math.ceil((me.projectStatistic.CountedLines / me.projectStatistic.TotalLines) * 100);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.projectProgress = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.FirstTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.firstProgress = Math.ceil((me.projectStatistic.FirstCountedLines / me.projectStatistic.FirstTotalLines) * 100);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.firstProgress = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.IsSecondEnabled == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.SecondTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.secondProgress = Math.ceil(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(me.projectStatistic.SecondCountedLines / me.projectStatistic.SecondTotalLines) * 100\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.secondProgress = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.IsThirdEnabled == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (me.projectStatistic.FirstTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.thirdProgess = Math.ceil((me.projectStatistic.ThirdCountedLines / me.projectStatistic.FirstTotalLines) * 100);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tme.thirdProgess = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//console.log(me.projectStatistic);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//debugger;\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: res.data.StatusMessage,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t//return;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tfail: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '网络异常请重试',\r\n\t\t\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tcomplete: function() {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t//如果项目列表为空，则提示尚未有盘点项目生成，清空currentProjectInfo，不能进入\r\n\t\t\t\t\t\t\t\t\tuni.removeStorageSync('currentProjectInfo');\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '暂无盘点项目',\r\n\t\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t// uni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t// \turl: '../user/usercenter'\r\n\t\t\t\t\t\t\t\t\t\t// });\r\n\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\turl: '../user/userguidance'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.StatusMessage,\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tme.userIsLogin = false;\r\n\t\t\t\tme.userInfo = {};\r\n\t\t\t\t//未登录，返回登陆界面\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '../user/login'\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// uni.showModal({\r\n\t\t\t\t// \ttitle: '未登录',\r\n\t\t\t\t// \tcontent: '您未登录，需要登录后才能继续',\r\n\t\t\t\t// \tsuccess: res => {\r\n\t\t\t\t// \t\tif (res.confirm) {\r\n\t\t\t\t// \t\t\t// 如果需要强制登录，使用reLaunch方式\r\n\t\t\t\t// \t\t\tuni.reLaunch({\r\n\t\t\t\t// \t\t\t\turl: '../user/login'\r\n\t\t\t\t// \t\t\t});\r\n\t\t\t\t// \t\t} else {\r\n\t\t\t\t// \t\t\tuni.reLaunch({\r\n\t\t\t\t// \t\t\t\turl: '../user/login'\r\n\t\t\t\t// \t\t\t});\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// });\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetStatistics: function(projectId) {\r\n\t\t\tlet me = this;\r\n\t\t\tlet serverUrl = me.getServerUrl();\r\n\t\t\tlet userInfo = me.getCurrentUserInfo();\r\n\r\n\t\t\tuni.request({\r\n\t\t\t\turl: serverUrl + '/PhysicalInventoryOrder/GetStatistics/' + projectId,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theader: {\r\n\t\t\t\t\tappKey: me.appKey,\r\n\t\t\t\t\tappSecret: me.appSecret,\r\n\t\t\t\t\tuserId: userInfo.Id,\r\n\t\t\t\t\topenId: userInfo.OpenId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.data.Status) {\r\n\t\t\t\t\t\tif (res.data.StatusCode == 'UserNotLogin') {\r\n\t\t\t\t\t\t\tuni.removeStorageSync('currentUserInfo');\r\n\t\t\t\t\t\t\tme.userIsLogin = false;\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '用户已异地登录',\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (res.data.Data == null) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '此盘点无统计数据',\r\n\t\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tme.projectStatistic = {};\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tme.projectStatistic = res.data.Data;\r\n\t\t\t\t\t\t\t\tif (me.projectStatistic.TotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\tme.projectProgress = Math.ceil((me.projectStatistic.CountedLines / me.projectStatistic.TotalLines) * 100);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tme.projectProgress = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (me.projectStatistic.FirstTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\tme.firstProgress = Math.ceil((me.projectStatistic.FirstCountedLines / me.projectStatistic.FirstTotalLines) * 100);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tme.firstProgress = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (me.projectStatistic.IsSecondEnabled == 1) {\r\n\t\t\t\t\t\t\t\t\tif (me.projectStatistic.SecondTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\tme.secondProgress = Math.ceil((me.projectStatistic.SecondCountedLines / me.projectStatistic.SecondTotalLines) * 100);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tme.secondProgress = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (me.projectStatistic.IsThirdEnabled == 1) {\r\n\t\t\t\t\t\t\t\t\tif (me.projectStatistic.FirstTotalLines > 0) {\r\n\t\t\t\t\t\t\t\t\t\tme.thirdProgess = Math.ceil((me.projectStatistic.ThirdCountedLines / me.projectStatistic.FirstTotalLines) * 100);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tme.thirdProgess = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log(me.projectStatistic);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//debugger;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: res.data.StatusMessage,\r\n\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//return;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: function() {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络异常请重试',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function() {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tgoToProgessReport() {\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '../reports/progress'\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tonShareAppMessage(res) {\r\n\t\treturn {\r\n\t\t\ttitle: '盘点App',\r\n\t\t\tpath: '/pages/user/login'\r\n\t\t};\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.progress {\r\n\tmargin: 30rpx 0;\r\n}\r\n\r\n.three {\r\n\tborder-right: 2rpx solid #f5f6f8;\r\n\tborder-bottom: 2rpx solid #f5f6f8;\r\n}\r\n\r\n.grace-title {\r\n\tpadding: 10rpx 0;\r\n\tline-height: 2em;\r\n\tdisplay: flex;\r\n\tflex-wrap: nowrap;\r\n\tfont-size: 28rpx;\r\n\tjustify-content: space-between;\r\n\tfont-weight: 500;\r\n\talign-items: center;\r\n}\r\n\r\n/* #ifdef H5 */\r\n.grace-title {\r\n\tfont-weight: 700;\r\n}\r\n\r\n/* #endif */\r\n.grace-title > .title {\r\n\twidth: 200rpx;\r\n\tflex: auto;\r\n}\r\n\r\n.grace-title > .icon {\r\n\twidth: 50rpx;\r\n\tfont-size: 50rpx;\r\n}\r\n\r\n.current-project {\r\n\tmargin-left: 20upx;\r\n\twidth: 170upx;\r\n}\r\n\r\n.three > .items {\r\n\twidth: 33.333333%;\r\n\tborder-left: 2rpx solid #f5f6f8;\r\n\tborder-top: 2rpx solid #f5f6f8;\r\n\tcolor: #a5a7b2;\r\n}\r\n\r\n.contact {\r\n\twidth: 100%;\r\n\theight: 100rpx;\r\n\tline-height: 100rpx;\r\n\ttext-align: center;\r\n\tmargin-top: 30rpx;\r\n}\r\n\r\n.demoForIcon {\r\n\tborder-right: 2rpx solid #f5f6f8;\r\n\tborder-bottom: 2rpx solid #f5f6f8;\r\n}\r\n\r\n.demoForIcon > .items {\r\n\tborder-left: 2rpx solid #f5f6f8;\r\n\tborder-top: 2rpx solid #f5f6f8;\r\n\tcolor: #a5a7b2;\r\n}\r\n\r\n.ucenter-line {\r\n\twidth: 100%;\r\n\theight: 3px;\r\n\tbackground: #f4f5f6;\r\n\tmargin: 16px 0;\r\n}\r\n\r\n.hello {\r\n\tdisplay: flex;\r\n\tflex: 1;\r\n\tflex-direction: column;\r\n}\r\n\r\n.title {\r\n\tcolor: #8f8f94;\r\n\tmargin-top: 50upx;\r\n}\r\n\r\n.ul {\r\n\tfont-size: 30upx;\r\n\tcolor: #8f8f94;\r\n\tmargin-top: 50upx;\r\n}\r\n\r\n.ul > view {\r\n\tline-height: 50upx;\r\n}\r\n\r\n.percenpading {\r\n\tpadding-right: 100upx;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1603551539040\n      var cssReload = require(\"C:/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}